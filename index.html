<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SalÃ£o do Baiano</title>

<style>
body{
    background:#111;
    color:#fff;
    font-family:Arial;
    text-align:center;
    padding:20px;
}
.day,.hour,.servico{
    display:inline-block;
    padding:10px 15px;
    margin:5px;
    background:#222;
    border-radius:6px;
    cursor:pointer;
}
.selected{background:#00c853}
button{
    padding:12px 25px;
    margin-top:15px;
    border:none;
    border-radius:8px;
    background:#444;
    color:#fff;
}
button.active{
    background:#00c853;
    cursor:pointer;
}
.box{
    display:none;
    background:#222;
    padding:20px;
    border-radius:10px;
    margin-top:20px;
}
img{width:200px}
</style>
</head>

<body>

<h1>ðŸ’ˆ SalÃ£o do Baiano</h1>

<h3>Dia</h3>
<div id="dias"></div>

<h3>HorÃ¡rio</h3>
<div id="horarios"></div>

<button id="agendar">AGENDAR</button>

<div id="cardapio" class="box">
<h3>ServiÃ§o</h3>
<div class="servico" data-valor="30">Cabelo â€“ R$30</div>
<div class="servico" data-valor="15">Barba â€“ R$15</div>
<div class="servico" data-valor="40">Barba + Cabelo â€“ R$40</div>
<div class="servico" data-valor="5">PÃ© de cabelo â€“ R$5</div>
<div class="servico" data-valor="15">PigmentaÃ§Ã£o â€“ R$15</div>
<div class="servico" data-valor="25">Corte social â€“ R$25</div>
</div>

<div id="pagamento" class="box">
<h3>Pague via PicPay</h3>
<p><strong>Total: R$ <span id="total"></span></strong></p>
<img id="qr">
<br>
<button id="confirmar">Confirmar pagamento</button>
</div>

<div id="confirmacao" class="box">
<h2>âœ… Reserva confirmada</h2>
<p>CÃ³digo: <strong id="codigo"></strong></p>
<p>Tempo atÃ© o horÃ¡rio:</p>
<h3 id="contador"></h3>
</div>

<script>
const diasSemana=["Dom","Seg","Ter","Qua","Qui","Sex","SÃ¡b"];
const dias=document.getElementById("dias");
const horarios=document.getElementById("horarios");
const btnAgendar=document.getElementById("agendar");

let diaSel,horaSel,valorSel;
let reservas={};

diasSemana.forEach(d=>{
    let el=document.createElement("div");
    el.className="day";
    el.innerText=d;
    el.onclick=()=>{
        document.querySelectorAll(".day").forEach(x=>x.classList.remove("selected"));
        el.classList.add("selected");
        diaSel=d;
        carregarHorarios();
    }
    dias.appendChild(el);
});

function carregarHorarios(){
    horarios.innerHTML="";
    let fim = diaSel==="Dom"?11:19;
    for(let h=8;h<=fim;h++){
        let hr=`${h.toString().padStart(2,"0")}:00`;
        let el=document.createElement("div");
        el.className="hour";
        el.innerText=hr;

        if(reservas[diaSel]?.includes(hr)){
            el.style.opacity="0.4";
        }else{
            el.onclick=()=>{
                document.querySelectorAll(".hour").forEach(x=>x.classList.remove("selected"));
                el.classList.add("selected");
                horaSel=hr;
                btnAgendar.classList.add("active");
            }
        }
        horarios.appendChild(el);
    }
}

btnAgendar.onclick=()=>{
    if(!horaSel) return;
    document.getElementById("cardapio").style.display="block";
};

document.querySelectorAll(".servico").forEach(s=>{
    s.onclick=()=>{
        valorSel=s.dataset.valor;
        document.getElementById("total").innerText=valorSel;

        // QR fake (simulaÃ§Ã£o)
        document.getElementById("qr").src=
        `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=PicPay-R$${valorSel}`;

        document.getElementById("cardapio").style.display="none";
        document.getElementById("pagamento").style.display="block";
    }
});

document.getElementById("confirmar").onclick=()=>{
    reservas[diaSel]=reservas[diaSel]||[];
    reservas[diaSel].push(horaSel);

    document.getElementById("pagamento").style.display="none";
    document.getElementById("confirmacao").style.display="block";
    document.getElementById("codigo").innerText=Math.floor(100000+Math.random()*900000);

    iniciarContagem();
};

function iniciarContagem(){
    let alvo=new Date();
    let idx=diasSemana.indexOf(diaSel);
    let dif=(idx-alvo.getDay()+7)%7;
    let [h]=horaSel.split(":");
    alvo.setDate(alvo.getDate()+dif);
    alvo.setHours(h,0,0);

    setInterval(()=>{
        let s=Math.floor((alvo-new Date())/1000);
        let m=Math.floor(s/60);
        document.getElementById("contador").innerText=
        `${m}m ${s%60}s`;
    },1000);
}
</script>
</body>
</html>
